<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Panda Birthday Surprise</title>
  <link href="https://fonts.googleapis.com/css?family=Segoe+UI:400,700&display=swap" rel="stylesheet">
  <style>
    body {
      background: #ffeefc;
      min-height: 100vh;
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      overflow-x: hidden;
    }
    .section { display: none; }
    .section.active { display: block; }

    /* Floating hearts and balloons */
    .floating {
      position: fixed;
      bottom: -40px;
      font-size: 2.3rem;
      animation: floatUp 6.5s linear infinite;
      z-index: 40;
      user-select: none;
      pointer-events: none;
      opacity: 0.61;
      left: 0;
      transition: opacity 0.4s;
    }
    .floating-paused { display: none !important; }
    @keyframes floatUp {
      0% { transform: translateY(0) scale(1); }
      83% { opacity: 0.81; }
      100% { transform: translateY(-110vh) scale(1.20); opacity: 0.17; }
    }

    /* Falling images animation (no greeting overlay) */
    #fallingBirthdaySection {
      position: fixed;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      background: linear-gradient(to bottom, #fff0f5, #ffe4e1);
      z-index: 99;
      display: none;
      overflow: hidden;
    }
    .falling-container {
      position: absolute; width: 100%; height: 100%;
      overflow: hidden; top: 0; left: 0; z-index: 2; pointer-events: none;
    }
    .falling-img {
      position: absolute;
      width: 90px; height: 90px;
      max-width: 20vw; max-height: 20vw;
      object-fit: cover;
      border-radius: 16px;
      box-shadow: 0 3px 16px #e0bbec44;
      animation: fall 12s linear infinite;
      will-change: transform, opacity;
      user-select: none;
      pointer-events: none;
    }
    @keyframes fall {
      0% { transform: translateY(-120px) rotate(0deg); opacity: 1; }
      95%{ opacity: 1;}
      100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
    }
    @media (max-width:700px) {
      .falling-img { width: 52px; height: 52px; max-width: 30vw; max-height: 30vw;}
    }

    .final-msg {
      display: none;
      font-size: 1.31rem;
      color: #d14d72;
      margin: 2.5rem auto 0 auto;
      text-align: center;
      font-weight: bold;
      background: rgba(255,255,255,0.74);
      border-radius: 18px;
      max-width: 430px;
      padding: 1.3rem 1rem 1.1rem 1rem;
      box-shadow: 0 3px 16px rgba(168,68,162,0.10);
      line-height: 1.7;
    }
    .final-msg .heart { font-size: 1.45em; color: #d14d72; margin: 0 2px; }
    .final-msg .quote { display: block; font-size: 1.08em; color: #8a2be2; margin-top: 1.12rem; font-style: italic; opacity: 0.97; }
  </style>
</head>
<body>
  <audio id="bgMusic" src="https://cdn.pixabay.com/audio/2022/12/19/audio_12d4f789a7.mp3" loop></audio>

  <!-- Floating emoji layer -->
  <div id="emojiFloatLayer"></div>

  <!-- Login -->
  <div id="step1" class="section active">
    <div class="login-container" style="background:#fffafc; border:2px solid #f7aef8; border-radius:22px; padding:2.5rem 2rem; max-width:340px; width:96vw; box-shadow:0 8px 32px rgba(218,98,125,0.08); display: flex; flex-direction:column; align-items:center; position:relative; margin:8vh auto 0 auto; z-index:2;">
      <div class="input-row" style="display:flex; align-items:center; width:100%; gap:10px; margin-bottom:1.5rem;">
        <img class="panda-icon" src="https://img.icons8.com/cute-clipart/64/000000/panda.png" alt="Panda Icon" style="width:38px;height:38px;"/>
        <input type="text" id="nameInput" placeholder="Please Enter Your Name Beautiful" autocomplete="off" style="flex:1 1 0; padding:0.72rem 1rem; border:1.4px solid #f7aef8; border-radius:8px; font-size:1rem; background:#fff7fb; color:#da627d;"/>
      </div>
      <button id="enterBtn" style="width:100%; padding:0.75rem 0; margin-top:0.5rem; background:#f7aef8; color:#da627d; border:none; border-radius:8px; font-size:1.15rem; font-weight:bold; cursor:pointer; box-shadow:0 2px 8px rgba(218,98,125,0.08);">Enter</button>
      <div class="welcome" id="welcomeMsg" style="display:none;font-size:1.11rem;color:#da627d;margin-top:1.35rem;text-align:center;font-weight:bold;letter-spacing:0.2px;">Welcome, bestie! Redirecting... üéà</div>
      <div id="errorModal" class="modal" style="display:none;position:fixed;left:0;top:0;right:0;bottom:0;align-items:center;justify-content:center;background:rgba(247,174,248,0.19);z-index:100;">
        <div class="modal-content" onclick="event.stopPropagation();" style="background:#fff0f8;border-radius:14px;padding:1.1rem 1.2rem 0.7rem 1.2rem;min-width:220px;border:1px solid #f7aef8;box-shadow:0 4px 24px rgba(218,98,125,0.09);text-align:center;transform:scale(1.1);">
          <span id="wrongText" style="color:#da627d; font-weight:700; font-size:1.04rem; letter-spacing:0.6px;">It's a wrong input</span>
          <div class="modal-small-text" style="color:#a844a2; font-size:0.66rem; margin-top:0.32rem; font-style:italic; opacity:0.9;">baga alochinchu</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main content -->
  <div id="step2" class="section">
    <div class="centered" style="text-align:center; margin-top:4.5vh;">
      <div class="main-msg" id="mainMsg">Do You Know What's the greatest things happened on August 8? </div>
      <div class="evas-btn-wrap" style="position:relative; height:70px; min-width:200px; margin-bottom:2.3rem;">
        <button id="evasBtn" style="position:absolute; left:50%; top:0; transform:translateX(-50%); background:#f7aef8; color:#da627d; border:none; border-radius:14px; font-size:1.09rem; font-weight:bold; padding:0.88rem 2.1rem; box-shadow:0 2px 12px rgba(138,43,226,0.09);">Click here to know</button>
      </div>
      <div class="typing-area" id="typingArea" style="display:none;"></div>
      <div class="fade-message" id="aug8Best" style="display:none;">Do You Know What's the greatest things happened on August 8? </div>
    </div>

    <div id="searchSection">
      <form id="googleForm" class="search-box" onsubmit="return false;" style="background:#fff; border-radius:28px; box-shadow:0 2px 16px rgba(100,0,155,0.10); padding:16px 20px; min-width:300px; max-width:90vw; display: flex; align-items: center;">
        <img src="https://ssl.gstatic.com/ui/v1/icons/mail/rfr/gmail.ico" width="23" style="margin-right:7px;" />
        <input class="search-input" id="googleQuery" autocomplete="off" placeholder="Search Google" style="border:none;outline:none;font-size:1.08rem;width:240px;flex-grow:1;margin-right:10px;"/>
        <button class="search-btn" id="searchBtn" style="background:#f7aef8; color:#da627d; border:none; border-radius:8px; font-weight:bold; padding:9px 20px; font-size:1.07rem; cursor:pointer;">Google Search</button>
      </form>
    </div>
    <div class="itsYou-wrap" id="youAnim"></div>

    <!-- Falling panda images only -->
    <div id="fallingBirthdaySection">
      <div class="falling-container" id="fallingContainer"></div>
    </div>
  </div>

  <div class="final-msg" id="finalMsg" style="display:none;">
    Wishing you endless smiles, surprise, and panda joy! <span class="heart">üêºüíñ</span>
    <span class="quote">‚Äî The world is lucky to have you.</span>
  </div>

  <script>
    // Floating hearts/balloons logic
    const emojiFloatLayer = document.getElementById('emojiFloatLayer');
    const emojis = ["‚ù§Ô∏è","üéà"];
    let floatInterval = null;
    function startFloatingEmojis(){
      if(floatInterval) return;
      floatInterval = setInterval(()=>{
        createFloatEmoji();
      }, 600);
    }
    function stopFloatingEmojis(){
      clearInterval(floatInterval);
      floatInterval = null;
      document.querySelectorAll('.floating').forEach(f=>f.classList.add('floating-paused'));
    }
    function resumeFloatingEmojis(){
      document.querySelectorAll('.floating').forEach(f=>f.classList.remove('floating-paused'));
      startFloatingEmojis();
    }
    function createFloatEmoji(){
      const f = document.createElement('div');
      f.className = 'floating';
      f.innerText = emojis[Math.floor(Math.random()*emojis.length)];
      f.style.left = Math.floor(Math.random()*92) + 'vw';
      f.style.fontSize = (2 + Math.random()*2.1) + 'rem';
      f.style.animationDuration = (5 + Math.random()*3.2) + 's';
      emojiFloatLayer.appendChild(f);
      setTimeout(()=>{ if(f && f.parentNode) f.remove(); }, 9000);
    }
    startFloatingEmojis();

    // Login/typing/animation flow (unchanged except new emoji hiding logic)
    const btn = document.getElementById('enterBtn');
    const input = document.getElementById('nameInput');
    const modal = document.getElementById('errorModal');
    const welcome = document.getElementById('welcomeMsg');
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    modal.onclick = function() { modal.style.display = 'none'; };
    btn.onclick = function() {
      const val = input.value.trim().toLowerCase();
      if(val === "panda") {
        welcome.style.display = 'block';
        document.getElementById('bgMusic').play().catch(()=>{});
        setTimeout(()=>{
          step1.classList.remove('active');
          step2.classList.add('active');
          startStep2();
        }, 4000);
      } else {
        modal.style.display = "flex";
      }
    };
    input.addEventListener("keyup", function(e) { if (e.key === "Enter") btn.click(); });

    function startStep2(){
      const evasBtn = document.getElementById('evasBtn');
      const wrap = document.querySelector('.evas-btn-wrap');
      let moveTimes = 0, maxMoves = 5;
      function getRandomPosition() {
        const btnWidth = evasBtn.offsetWidth;
        const btnHeight = evasBtn.offsetHeight;
        const containerWidth = wrap.clientWidth;
        const containerHeight = wrap.clientHeight;
        const padding = 8;
        const safeWidth = Math.max(containerWidth, btnWidth+padding*2);
        const safeHeight = Math.max(containerHeight, btnHeight+padding*2);
        const maxX = safeWidth - btnWidth - padding;
        const maxY = safeHeight - btnHeight - padding;
        const left = Math.max(padding, Math.floor(Math.random() * maxX));
        const top = Math.max(padding, Math.floor(Math.random() * maxY));
        return { left, top };
      }
      evasBtn.onmouseenter = function () {
        if (moveTimes < maxMoves) {
          moveTimes++;
          const pos = getRandomPosition();
          evasBtn.style.left = pos.left + "px";
          evasBtn.style.top = pos.top + "px";
          evasBtn.style.transform = "";
        }
      };
      evasBtn.onclick = typingSequence;
      evasBtn.disabled = false; evasBtn.innerText = "Click here to know"; evasBtn.style.opacity=1; evasBtn.style.transform='';
      let alreadyHidden = false;
      function typingSequence(){
        evasBtn.disabled=true; evasBtn.style.opacity=0.55; evasBtn.innerText="Processing...";
        setTimeout(()=>{
          if(!alreadyHidden){
            wrap.style.display='none';
            alreadyHidden = true;
          }
          document.getElementById('mainMsg').style.display='none';
          document.getElementById('typingArea').style.display='block';
          runTypingAnimation();
        },600);
      }
      function runTypingAnimation(){
        const msg = `
<b>based on historical records, these are all the disasters that happend on 8th August.</b><br>
<br>
<b>Natural Disasters</b><br>
<span style="color:#d14d72;">&#8226;</span> <b>2023 Maui Wildfires, United States</b>: The devastating series of wildfires on the Hawaiian island of Maui began on August 8, 2023.<br>
<span style="color:#d14d72;">&#8226;</span> <b>2010 Gansu Mudslide, China</b>: A massive and deadly mudslide struck Zhouqu County in the Gansu province during the night of August 8, 2010.<br>
<span style="color:#d14d72;">&#8226;</span> <b>1993 Guam Earthquake</b>: A powerful earthquake with a magnitude of 7.8 struck the island of Guam on the evening of August 8, 1993.<br>
<span style="color:#d14d72;">&#8226;</span> <b>1975 Banqiao Dam Collapse, China</b>: Triggered by Typhoon Nina, the Banqiao Dam and numerous other dams in the region failed in the early morning hours of August 8, 1975.<br>
<br>
<b>Accidents and Human-Caused Disasters</b><br>
<span style="color:#a844a2;">&#8226;</span> <b>2019 Missile Test Explosion, Russia</b>: An explosion at a military test site near Nyonoksa, resulting in a radiation spike, occurred on August 8, 2019.<br>
<span style="color:#a844a2;">&#8226;</span> <b>2009 Hudson River Mid-air Collision, United States</b>: A tour helicopter and a private plane collided over the Hudson River, killing nine people on August 8, 2009.<br>
<br>
<b>Terrorism and Violent Conflicts</b><br>
<span style="color:#8a2be2;">&#8226;</span> <b>2016 Hospital Attack, Pakistan</b>: A suicide bomber targeted the emergency ward of a government hospital in Quetta on August 8, 2016, killing at least 70 people.<br>
<span style="color:#8a2be2;">&#8226;</span> <b>2013 Funeral Bombing, Pakistan</b>: A suicide bomber attacked a funeral for a police officer in Quetta on August 8, 2013.<br>
<span style="color:#8a2be2;">&#8226;</span> <b>1998 Consulate Raid, Afghanistan</b>: The raid by the Taliban on the Iranian consulate in Mazar-i-Sharif, resulting in the death of diplomats and a journalist, took place on August 8, 1998.<br>
<span style="color:#8a2be2;">&#8226;</span> <b>1988 Pro-Democracy Uprising, Myanmar</b>: The 8888 Uprising, a nationwide protest for democracy, was named for its start date of August 8, 1988.<br>
<span style="color:#8a2be2;">&#8226;</span> <b>1945 Soviet Declaration of War, WWII</b>: The Soviet Union officially declared war on the Empire of Japan on August 8, 1945, and commenced its invasion of Manchuria."<br>
        `;
        let i = 0, speed=19;
        const el=document.getElementById('typingArea');
        el.innerHTML="";
        function typing(){
          if(i<msg.length) {
            el.innerHTML = msg.slice(0,i+1);
            i++;
            setTimeout(typing,speed);
          } else {
            setTimeout(()=>{
              document.getElementById('typingArea').style.display='none';
              let aug8Best = document.getElementById('aug8Best');
              aug8Best.style.display='block'; aug8Best.style.opacity=1;
              setTimeout(()=>{
                aug8Best.style.opacity=0;
                showSearchUI();
              },2300);
            },2000);
          }
        }
        typing();
      }
      function showSearchUI() {
        document.getElementById("aug8Best").style.display='none';
        document.getElementById("searchSection").style.display = "flex";
        const ginput = document.getElementById("googleQuery");
        const quest = "Best thing happened on 8th August?";
        ginput.value = "";
        let j=0;
        ginput.focus();
        function typeQ() {
          if(j < quest.length) {
            ginput.value += quest.charAt(j);
            j++;
            setTimeout(typeQ, 37);
          } else {
            setTimeout(()=>{
              document.getElementById("searchBtn").click();
            },410);
          }
        }
        typeQ();
      }
    }

    document.getElementById("searchBtn").onclick = function() {
      document.getElementById("googleForm").classList.add("searching");
      setTimeout(()=>{
        document.getElementById("searchSection").style.display='none';
        showItsYouAnim();
      },800);
    };

    // "It's YOU!" sequence, then falling birthday animation with balloon/heart pause
    function showItsYouAnim(){
      const youAnim = document.getElementById('youAnim');
      youAnim.innerHTML = "";
      youAnim.style.display='block';
      let positions = [13,28,46,62,78];
      positions.forEach((top,idx)=>{
        let div = document.createElement('div');
        div.className = "itsYou";
        div.style.top = `${top}vh`;
        div.style.animationDuration = (3.5+idx*0.2)+"s";
        div.innerText = "It‚Äôs YOU! üéâ";
        youAnim.appendChild(div);
      });
      setTimeout(()=>{
        youAnim.style.display='none';
        showFallingBirthday();
      },4000);
    }

    // Falling panda images after It's YOU
    const imageUrls = [
      "panda-images/panda1.jpeg","panda-images/panda2.jpeg","panda-images/panda3.jpeg","panda-images/panda4.jpg",
      "panda-images/panda5.jpg","panda-images/panda6.jpg","panda-images/panda7.jpg","panda-images/panda10.jpg",
      "panda-images/panda11.jpg","panda-images/panda12.jpg","panda-images/panda13.jpeg","panda-images/panda14.jpeg"
    ];
    function showFallingBirthday() {
      stopFloatingEmojis();  // Hide hearts and balloons
      const section = document.getElementById('fallingBirthdaySection');
      section.style.display = 'block'; section.style.opacity = 0;
      setTimeout(()=>{ section.style.transition = "opacity 1s"; section.style.opacity = 1; }, 20);
      const container = document.getElementById('fallingContainer');
      container.innerHTML = '';
      const totalImages = 36;
      for (let i = 0; i < totalImages; i++) {
        const randomIndex = Math.floor(Math.random() * imageUrls.length);
        const img = document.createElement('img');
        img.src = imageUrls[randomIndex];
        img.className = 'falling-img';
        img.style.left = `${Math.random() * 95}vw`;
        img.style.animationDelay = `${Math.random() * 11.5}s`;
        img.style.animationDuration = 11 + Math.random() * 2.5 + 's';
        img.style.transform = `rotate(${Math.random() * 360}deg)`;
        container.appendChild(img);
      }
      setTimeout(()=>{
        section.style.transition = "opacity 0.9s";
        section.style.opacity = 0;
        setTimeout(()=>{
          section.style.display = "none";
          document.getElementById('finalMsg').style.display = 'block';
          // Optionally, you could call resumeFloatingEmojis() here to bring them back for the final message.
        }, 900);
      }, 12000);
    }
  </script>
</body>
</html>
